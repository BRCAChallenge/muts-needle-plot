!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.mutsNeedlePlot=t()}}(function(){var t;return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return o(n?n:e)},d,d.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,r){!function(){function e(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++c+"";return t?t+e:e},has:function(t,e){return s.call(t,e)},each:function(t,e,n){if(null!=t)if(a&&t.forEach===a)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t);else for(var i in t)this.has(t,i)&&e.call(n,t[i],i,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var o,i=this,a=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,l=Array.prototype.slice,c=0,d=e();o={on:function(t,e,n){if(!f(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var r=this,o=d.once(function(){r.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var r,o,i,a,s,l,c,u;if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:d.keys(this._events),s=0,l=a.length;s<l;s++)if(t=a[s],i=this._events[t]){if(this._events[t]=r=[],e||n)for(c=0,u=i.length;c<u;c++)o=i[c],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&r.push(o);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=l.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&h(n,e),r&&h(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var o=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var i in r)r[i].off(e,n,this),o&&delete this._listeners[i];return this}};var u=/\s+/,f=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(r));return!1}if(u.test(n)){for(var i=n.split(u),a=0,s=i.length;a<s;a++)t[e].apply(t,[i[a]].concat(r));return!1}return!0},h=function(t,e){var n,r=-1,o=t.length,i=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++r<o;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=t[r]).callback.call(n.ctx,i);return;case 2:for(;++r<o;)(n=t[r]).callback.call(n.ctx,i,a);return;case 3:for(;++r<o;)(n=t[r]).callback.call(n.ctx,i,a,s);return;default:for(;++r<o;)(n=t[r]).callback.apply(n.ctx,e)}},p={listenTo:"on",listenToOnce:"once"};d.each(p,function(t,e){o[e]=function(e,n,r){var o=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=d.uniqueId("l"));return o[i]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),o.bind=o.on,o.unbind=o.off,o.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return d.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=o),r.BackboneEvents=o):"function"==typeof t&&"object"==typeof t.amd?t(function(){return o}):i.BackboneEvents=o}(this)},{}],2:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":1}],3:[function(t,e,n){var r=t("backbone-events-standalone");r.onAll=function(t,e){return this.on("all",t,e),this},r.oldMixin=r.mixin,r.mixin=function(t){r.oldMixin(t);for(var e=["onAll"],n=0;n<e.length;n++){var o=e[n];t[o]=this[o]}return t},e.exports=r},{"backbone-events-standalone":2}],4:[function(e,n,r){!function(e,r){"function"==typeof t&&t.amd?t(["d3"],r):"object"==typeof n&&n.exports?n.exports=function(t){return t.tip=r(t),t.tip}:e.d3.tip=r(e.d3)}(this,function(t){return function(){function e(t){b=p(t),C=b.createSVGPoint(),document.body.appendChild(m)}function n(){return"n"}function r(){return[0,0]}function o(){return" "}function i(){var t=g();return{top:t.n.y-m.offsetHeight,left:t.n.x-m.offsetWidth/2}}function a(){var t=g();return{top:t.s.y,left:t.s.x-m.offsetWidth/2}}function s(){var t=g();return{top:t.e.y-m.offsetHeight/2,left:t.e.x}}function l(){var t=g();return{top:t.w.y-m.offsetHeight/2,left:t.w.x-m.offsetWidth}}function c(){var t=g();return{top:t.nw.y-m.offsetHeight,left:t.nw.x-m.offsetWidth}}function d(){var t=g();return{top:t.ne.y-m.offsetHeight,left:t.ne.x}}function u(){var t=g();return{top:t.sw.y,left:t.sw.x-m.offsetWidth}}function f(){var t=g();return{top:t.se.y,left:t.e.x}}function h(){var e=t.select(document.createElement("div"));return e.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"}),e.node()}function p(t){return t=t.node(),"svg"===t.tagName.toLowerCase()?t:t.ownerSVGElement}function g(){for(var e=k||t.event.target;"undefined"==typeof e.getScreenCTM&&"undefined"===e.parentNode;)e=e.parentNode;var n={},r=e.getScreenCTM(),o=e.getBBox(),i=o.width,a=o.height,s=o.x,l=o.y;return C.x=s,C.y=l,n.nw=C.matrixTransform(r),C.x+=i,n.ne=C.matrixTransform(r),C.y+=a,n.se=C.matrixTransform(r),C.x-=i,n.sw=C.matrixTransform(r),C.y-=a/2,n.w=C.matrixTransform(r),C.x+=i,n.e=C.matrixTransform(r),C.x-=i/2,C.y-=a/2,n.n=C.matrixTransform(r),C.y+=a,n.s=C.matrixTransform(r),n}var y=n,x=r,v=o,m=h(),b=null,C=null,k=null;e.show=function(){var n=Array.prototype.slice.call(arguments);n[n.length-1]instanceof SVGElement&&(k=n.pop());var r,o=v.apply(this,n),i=x.apply(this,n),a=y.apply(this,n),s=t.select(m),l=S.length,c=document.documentElement.scrollTop||document.body.scrollTop,d=document.documentElement.scrollLeft||document.body.scrollLeft;for(s.html(o).style({opacity:1,"pointer-events":"all"});l--;)s.classed(S[l],!1);return r=w.get(a).apply(this),s.classed(a,!0).style({top:r.top+i[0]+c+"px",left:r.left+i[1]+d+"px"}),e},e.hide=function(){var n=t.select(m);return n.style({opacity:0,"pointer-events":"none"}),e},e.attr=function(n,r){if(arguments.length<2&&"string"==typeof n)return t.select(m).attr(n);var o=Array.prototype.slice.call(arguments);return t.selection.prototype.attr.apply(t.select(m),o),e},e.style=function(n,r){if(arguments.length<2&&"string"==typeof n)return t.select(m).style(n);var o=Array.prototype.slice.call(arguments);return t.selection.prototype.style.apply(t.select(m),o),e},e.direction=function(n){return arguments.length?(y=null==n?n:t.functor(n),e):y},e.offset=function(n){return arguments.length?(x=null==n?n:t.functor(n),e):x},e.html=function(n){return arguments.length?(v=null==n?n:t.functor(n),e):v};var w=t.map({n:i,s:a,e:s,w:l,nw:c,ne:d,sw:u,se:f}),S=w.keys();return e}})},{}],5:[function(t,e,n){function r(e){function n(){var t=S.extent();l.trigger("needleSelectionChange",{coords:t}),x.domain(S.empty()?v.domain():S.extent()),i()}function r(){s();var t=S.extent();needleHeads=d3.selectAll(".needle-head"),needleLines=d3.selectAll(".needle-line"),_=[],categCounts={};for(key in Object.keys(l.totalCategCounts))categCounts[key]=0;needleHeads.classed("selected",function(e){return is_brushed=t[0]<=e.coord&&e.coord<=t[1],is_brushed&&(_.push(e),categCounts[e.category]=(categCounts[e.category]||0)+e.value),is_brushed}),l.trigger("needleSelectionChangeEnd",{selected:_,categCounts:categCounts,coords:S.extent()})}function o(){var t=S.extent();needleHeads=d3.selectAll(".needle-head"),needleLines=d3.selectAll(".needle-line"),_=[],categCounts={};for(key in Object.keys(l.totalCategCounts))categCounts[key]=0;needleHeads.classed("selected",function(e){return is_brushed=t[0]<=e.coord&&e.coord<=t[1],is_brushed&&(_.push(e),categCounts[e.category]=(categCounts[e.category]||0)+e.value),is_brushed}),l.trigger("needleSelectionChangeEnd",{selected:_,categCounts:categCounts,coords:S.extent()})}function i(){d3.selectAll(".needle-head").attr("cx",function(t){return x(t.coord)}),d3.selectAll(".needle-line").attr("x1",function(t){return x(t.coord)}).attr("x2",function(t){return x(t.coord)}),d3.selectAll(".axis path").attr("fill","none").attr("stroke","#000"),d3.selectAll(".axis line").attr("fill","none").attr("stroke","#000"),b.select(".x.axis").call(xAxis)}function a(){x.domain()[0]<=h+1&&x.domain()[1]>=p-1?S.clear():(S.extent(x.domain()),A.call(S)),C.select(".selector").call(S);var t=S.extent();t[1]-t[0]>0?l.selectionTip.show({left:t[0],right:t[1]},A.node()):l.selectionTip.hide(),o()}function s(){w.x(x);var t=p-h,e=x.domain()[1]-x.domain()[0],n=e/t,r=1e3*n;A.call(S),w.scaleExtent([n,r])}var l=this;if(this.maxCoord=e.maxCoord||-1,this.maxCoord<0)throw new Error("'maxCoord' must be defined initiation config!");if(this.minCoord=e.minCoord||1,this.mutationData=e.mutationData||-1,this.maxCoord<0)throw new Error("'mutationData' must be defined initiation config!");if(this.regionData=e.regionData||-1,this.maxCoord<0)throw new Error("'regionData' must be defined initiation config!");this.totalCategCounts={},this.categCounts={},this.selectedNeedles=[],this.variantDetailLink=e.variantDetailLink;var c=document.getElementById(e.targetElement)||e.targetElement||document.body,d=this.width=e.width||c.offsetWidth||1e3,u=this.height=e.height||c.offsetHeight||500;this.colorMap=e.colorMap||{};var f=Object.keys(this.colorMap).map(function(t){return l.colorMap[t]});this.colorScale=d3.scale.category20().domain(Object.keys(this.colorMap)).range(f.concat(d3.scale.category20().range())),this.legends=e.legends||{y:"Value",x:"Coordinate"},this.svgClasses="mutneedles",this.buffer=0;var h=this.minCoord,p=this.maxCoord,g=0;g=d>=u?u/8:d/8,this.buffer=g+50;var y=t("d3-tip");y(d3),this.tip=d3.tip().attr("class","d3-tip d3-tip-needle").offset([-10,0]).html(function(t){return"<span>"+t.value+" "+t.category+" at coord. "+t.coordString+"</span>"}),this.selectionTip=d3.tip().attr("class","d3-tip d3-tip-selection").offset([-10,0]).html(function(t){return"<span> Selected coordinates<br/>"+Math.round(t.left)+" - "+Math.round(t.right)+"</span>"}).direction("n");var x=d3.scale.linear().domain([this.minCoord,this.maxCoord]).range([1.5*g,d-g]).nice();this.xScale=x;var v=d3.scale.linear().domain([this.minCoord,this.maxCoord]).range([1.5*g,d-g]).nice();this.navXScale=v;var m=d3.scale.linear().domain([0,5]).range([u-50-3*g,g]).nice();this.yScale=m;var b,C,b=d3.select(c).append("svg").attr("width",d).attr("height",345).attr("class",this.svgClasses).append("g"),k=b.append("g").attr("clip-path","url(#plotAreaClip)");k.append("clipPath").attr("id","plotAreaClip").append("rect").attr("x",1.2*(l.buffer-50)+18).attr("y",0).attr({width:this.navXScale(this.maxCoord)-this.navXScale(this.minCoord),height:this.height-this.buffer-75});var C=d3.select(c).append("svg").classed("navigator",!0).attr("width",d).attr("height",200).attr("class","brush");k.call(this.tip),C.call(this.selectionTip);var w=d3.behavior.zoom().x(this.xScale).on("zoom",function(){if(x.domain()[0]<h){var t=w.translate()[0]-x(h)+x.range()[0];w.translate([t,0])}else if(x.domain()[1]>p){var t=w.translate()[0]-x(p)+x.range()[1];w.translate([t,0])}i(),a()});this.zoom=w,l.selector=d3.svg.brush().x(v).on("brush",n);var S=l.selector,A=C.append("g").attr("class","selector").style("pointer-events","all").call(S).selectAll(".extent").attr("height",80).attr("opacity",.2).attr("transform","translate(0,-30)");A.on("mouseenter",function(){S.extent()}),C.selectAll(".background").attr("height",80).attr("width",this.xScale(p)-this.xScale(h)-100).attr("y",100).style("visibility","visible").style("fill-opacity",0).style("stroke","black");var _=this.selectedNeedles;S.on("brushend",r),this.drawNeedles(b,k,C,this.mutationData,this.regionData),a(),s(),l.on("needleSelectionChangeEnd",function(t){l.categCounts=t.categCounts,l.selectedNeedles=t.selected,b.call(verticalLegend)}),l.on("needleSelectionChange",function(t){selection=t.coords,selection[1]-selection[0]>0?l.selectionTip.show({left:selection[0],right:selection[1]},A.node()):l.selectionTip.hide()})}r.prototype.drawLegend=function(t){self=this,mutCategories=[],categoryColors=[],allcategs=Object.keys(self.totalCategCounts),orderedDeclaration=self.colorScale.domain();for(idx in orderedDeclaration)r=orderedDeclaration[idx],allcategs.indexOf(r)>-1&&(mutCategories.push(r),categoryColors.push(self.colorScale(r)));mutsScale=self.colorScale.domain(mutCategories).range(categoryColors);var e=self.xScale.domain();xplacement=.75*(self.xScale(e[1])-self.xScale(e[0]))+self.xScale(e[0]);var n=0;for(var r in self.totalCategCounts)n+=self.totalCategCounts[r];legendLabel=function(t){var e=self.categCounts[t]||0==self.selectedNeedles.length&&self.totalCategCounts[t]||0;return t+(e>0?": "+e+" ("+Math.round(e/n*100)+"%)":"")},legendClass=function(t){var e=self.categCounts[t]||0==self.selectedNeedles.length&&self.totalCategCounts[t]||0;return e>0?"":"nomuts"},self.noshow=[];var o=d3.selectAll(".needle-head"),i=d3.selectAll(".needle-line");showNoShow=function(t){_.contains(self.noshow,t)?self.noshow=_.filter(self.noshow,function(e){return e!=t}):self.noshow.push(t),o.classed("noshow",function(t){return _.contains(self.noshow,t.category)}),i.classed("noshow",function(t){return _.contains(self.noshow,t.category)});var e=d3.selectAll("g.legendCells");e.classed("noshow",function(t){return _.contains(self.noshow,t.stop[0])})},verticalLegend=d3.svg.legend().labelFormat(legendLabel).labelClass(legendClass).onLegendClick(showNoShow).cellPadding(4).orientation("horizontal").units(n+" Variants").cellWidth(20).cellHeight(12).inputScale(mutsScale).cellStepping(4).place({x:xplacement-280,y:70}),t.call(verticalLegend)},r.prototype.drawRegions=function(t,e){function n(e){function n(t){var e=t.radius+3,n=t.x-e,r=t.x+e,o=t.y-e,i=t.y+e;return function(a,s,l,c,d){if(a.point&&a.point!==t){var u=t.x-a.point.x,f=u;e=t.radius+a.point.radius,Math.abs(u)<e&&(u=(u-e)/u*.005,f*=u,f=t.x>a.point.x&&f<0?-f:f,t.x+=f,a.point.x-=f)}return s>r||c<n||l>i||d<o}}var r=t.selectAll().data(["dummy"]).enter().insert("g",":first-child").attr("class","regionsBG").append("rect").attr("x",a(i)).attr("y",l).attr("width",a(o)-a(i)).attr("height",10).attr("fill","lightgrey");d3.select(".extent").attr("y",c-10);var s=r=d3.select(".brush").selectAll().data(e).enter().append("g").attr("class","regionGroup");s.append("rect").attr("x",function(t){return a(t.start)}).attr("y",c).attr("ry","3").attr("rx","3").attr("width",function(t){return a(t.end)-a(t.start)}).attr("height",16).style("fill",function(t){return t.color}).style("stroke",function(t){return d3.rgb(t.color).darker()}),s.attr("pointer-events","all").attr("cursor","pointer").on("click",function(t){self.selector.extent([t.start,t.end]),self.selector(d3.select(".selector").transition()),self.selector.event(d3.select(".selector").transition()),self.selector.event(d3.select(".background").style("pointer-events","all"))});var u=[],f={},h=function(t){var e="regionName",n="RR_"+t.name;return _.has(f,t.name)&&(e="repeatedName noshow "+n),f[t.name]=n,e};s.append("text").attr("class",h).attr("text-anchor","middle").attr("fill","black").attr("opacity",.5).attr("x",function(t){return t.x=a(t.start)+(a(t.end)-a(t.start))/2,t.x}).attr("y",function(t){return t.y=d,t.y}).attr("dy","0.35em").style("font-size","12px").style("text-decoration","bold").text(function(t){return t.name});var p=d3.selectAll(".regionName");p.each(function(t,e){var n=this.getBBox().width/2;u.push({x:t.x,y:t.y,label:t.name,weight:t.name.length,radius:n})});var g=d3.layout.force().chargeDistance(5).nodes(u).charge(-10).gravity(0),y=(a(i),a(o),function(e,n){var r=f[e];t.selectAll("text."+r).attr("x",newx)});g.on("tick",function(e){for(var r=d3.geom.quadtree(u),o=0,i=u.length;++o<i;)r.visit(n(u[o]));var o=0;t.selectAll("text.regionName").attr("x",function(t){return newx=u[o++].x,y(t.name,newx),newx})}),g.start()}function r(t){for(key in Object.keys(t))t[key].start=getRegionStart(t[key].coord),t[key].end=getRegionEnd(t[key].coord),t[key].color=getColor(t[key].name);return t}var o=this.maxCoord,i=this.minCoord,a=(this.buffer,this.colorMap,this.yScale,this.xScale),s=!0;getRegionStart=function(t){return parseInt(t.split("-")[0])},getRegionEnd=function(t){return parseInt(t.split("-")[1])},getColor=this.colorScale;var l=90,c=l-3,d=l+20;1!=s&&(d=l+5),"string"==typeof e?d3.json(e,function(t,e){return t?console.debug(t):(regionList=r(e),void n(regionList))}):(regionList=r(e),n(regionList))},r.prototype.drawAxes=function(t,e){var n=this.yScale,r=this.xScale;xAxis=d3.svg.axis().scale(r).ticks(8).orient("bottom"),t.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+(this.height-this.buffer-75)+")").call(xAxis),yAxis=d3.svg.axis().scale(n).orient("left").ticks(3).tickFormat(function(t){var e="";return"1.0"==t?e="Uncertain":"2.0"==t?e="Benign":"3.0"==t&&(e="Pathogenic"),e}),t.append("svg:g").attr("class","y axis").attr("transform","translate("+(1.2*(this.buffer-50)+5)+",50)").call(yAxis),navXAxis=d3.svg.axis().scale(r).orient("bottom"),e.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+(200-this.buffer+40)+")").call(navXAxis),d3.selectAll(".axis path").attr("fill","none").attr("stroke","#000"),d3.selectAll(".axis line").attr("fill","none").attr("stroke","#000"),d3.selectAll(".domain").attr("stroke","black").attr("stroke-width",1),t.append("text").attr("class","y-label").attr("text-anchor","middle").attr("transform","translate("+this.buffer/3+","+this.height/2+"), rotate(-90)").text(this.legends.y).attr("font-weight","bold").attr("font-size",12),e.append("text").attr("class","x-label").attr("text-anchor","middle").attr("transform","translate("+this.width/2+","+(215-this.buffer/3)+")").text(this.legends.x).attr("font-weight","bold").attr("font-size",12)},r.prototype.drawNeedles=function(t,e,n,r,o){function i(t){if(coordString=t.coord,numericCoord=formatCoord(t.coord),numericValue=Number(t.value),stickHeight=stackNeedle(numericCoord,numericValue,needlePoint),stickHeight=0,"Uncertain"==t.category?stickHeight=1:"Benign"==t.category?stickHeight=2:"Pathogenic"==t.category&&(stickHeight=3),category=t.category||"other",stickHeight+numericValue>highest&&getYAxis().domain([0,3]),numericCoord>0&&d.navXScale.domain()[0]<=numericCoord&&numericCoord<=d.navXScale.domain()[1])return d.totalCategCounts[category]=(d.totalCategCounts[category]||0)+numericValue,{category:category,coordString:coordString,coord:numericCoord,value:numericValue,stickHeight:stickHeight,color:d.colorScale(category),oldData:t.oldData}}function a(t){for(key in t)formatted=i(t[key]),void 0!=formatted&&u.push(formatted);return u}function s(r){minSize=4,maxSize=10,headSizeScale=d3.scale.log().range([minSize,maxSize]).domain([1,(highest+2)/2]);var i=function(t){return d3.min([d3.max([headSizeScale(t),minSize]),maxSize])};e.selectAll().data(r).enter().append("line").attr("y1",function(t){return l(t.stickHeight)+50+i(t.value)}).attr("y2",function(t){return l(0)+50}).attr("x1",function(t){return c(t.coord)}).attr("x2",function(t){return c(t.coord)}).attr("class","needle-line").attr("stroke","black").attr("stroke-width",1);e.append("rect").attr("class","overlay").attr("x",1.2*(d.buffer-50)+18).attr("y",0).attr("width",d.navXScale(d.maxCoord)-d.navXScale(d.minCoord)).attr("height",d.height-d.buffer-75).attr("opacity",0).call(d.zoom);var a=e.selectAll().data(r).enter().append("circle").attr("cy",function(t){return l(t.stickHeight)+50}).attr("cx",function(t){return c(t.coord)}).attr("r",function(t){return i(t.value)}).attr("class","needle-head").style("fill",function(t){return t.color}).style("stroke",function(t){return d3.rgb(t.color).darker()}).on("mouseover",function(t){d3.select(this).moveToFront(),tip.show(t)}).on("mouseout",tip.hide).attr("pointer-events","all").attr("cursor","pointer").on("click",function(t){selectionTip.hide(),d.variantDetailLink(t.oldData)});d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},void 0!=o&&d.drawRegions(n,o),d.drawLegend(e),d.drawAxes(t,n),a.each(function(){this.parentNode.appendChild(this)})}var l=this.yScale,c=this.xScale,d=(this.variantDetailLink,this);getYAxis=function(){return l},formatCoord=function(t){return t.indexOf("-")>-1?(coords=t.split("-"),t=Math.floor((parseInt(coords[0])+parseInt(coords[1]))/2),isNaN(t)&&("?"==coords[0]?t=parseInt(coords[1]):"?"==coords[1]&&(t=parseInt(coords[0])))):t=parseInt(t),t},tip=this.tip,selectionTip=this.selectionTip,needlePoint={},highest=0,stackNeedle=function(t,e,n){return stickHeight=0,t="p"+String(t),t in n?(stickHeight=n[t],newHeight=stickHeight+e,n[t]=newHeight):n[t]=e,stickHeight};var u=[];"string"==typeof r?d3.json(r,function(t,e){if(t)throw new Error(t);u=a(e),s(u)}):(u=a(r),s(u))};var o=t("biojs-events");o.mixin(r.prototype),e.exports=r},{"biojs-events":3,"d3-tip":4}],"muts-needle-plot":[function(t,e,n){e.exports=t("./src/js/MutsNeedlePlot.js")},{"./src/js/MutsNeedlePlot.js":5}]},{},["muts-needle-plot"])("muts-needle-plot")});